import { Appear, Head, Image  } from 'mdx-deck'
import { FullScreenCode, Invert, Split } from 'mdx-deck/layouts'
import { CodeSurfer } from "mdx-deck-code-surfer"
import nightOwl from "prism-react-renderer/themes/nightOwl"
export { dark as theme } from 'mdx-deck/themes'

<Head>
  <title>Progressive web app presentation</title>
  <meta itemProp="name" content="Progressive web app presentation" />
  <meta itemProp="description" content="Progressive web app presentation" />
  <meta itemProp="image" content="https://api.adorable.io/avatars/285/abott@adorable.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@_AlanCurrie" />
  <meta name="twitter:title" content="Progressive web app presentation" />
  <meta name="twitter:description" content="Progressive web app presentation" />
  <meta name="twitter:image" content="https://api.adorable.io/avatars/285/abott@adorable.png" />
  <meta property="og:title" content="Progressive web app presentation" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://reverent-rosalind-f11320.netlify.com/" />
  <meta property="og:image" content="https://api.adorable.io/avatars/285/abott@adorable.png" />
  <meta property="og:description" content="Progressive web app presentation" />
  <meta property="og:site_name" content="Progressive web app presentation" />
  <meta property="article:section" content="Article Section (React? Design?)" />
</Head>

# ü§ñ PWA Presentation ü§ñ

(progressive web applications)

---

# What is a PWA ü¶ï

### Progressive Web Apps are user experiences that have the reach of the web, and are:

<Appear>
  <p></p>
  <p>Reliable - Load instantly and never show the downasaur, even in uncertain network conditions.</p>
  <p>Fast - Respond quickly to user interactions with silky smooth animations and no janky scrolling.</p>
  <p>Engaging - Feel like a natural app on the device, with an immersive user experience.</p>
  <p>This new level of quality allows Progressive Web Apps to earn a place on the user's home screen.</p>
</Appear>

```notes
- Create speaker notes in fenced code blocks
```

export default Split

---

## App manifest


https://developer.mozilla.org/en-US/docs/Web/Manifest


```notes
- Create speaker notes in fenced code blocks
```

---

## Display

Defines the developers‚Äô preferred display mode for the website.

---

### Browser

The application opens in a conventional browser tab or new window, depending on the browser and platform. _This is the default._

---

### Fullscreen

All of the available display area is used and no user agent chrome is shown. 	standalone

---

### Standalone

  The application will look and feel like a standalone application.
  This can include the application having a different window, its own icon in the application launcher, etc.
  In this mode, the user agent will exclude UI elements for controlling navigation, but can include other UI elements such as a status bar.

---

### Minimal-ui

The application will look and feel like a standalone application, but will have a minimal set of UI elements for controlling navigation.
The elements will vary by browser.

---

<CodeSurfer
  title="‚öôÔ∏è app manifest ‚öôÔ∏è"
  notes="some useful notes ‚úèÔ∏è"
  code={require("!raw-loader!./examples/manifest.js")}
  lang="javascript"
  showNumbers={true}
  theme={nightOwl}
  dark={false}
  steps={[
    { lines: [27], notes: "Note for the first step ‚úèÔ∏è" },
  ]}
/>

```notes
- Create speaker notes in fenced code blocks
```

---

<CodeSurfer
  title="‚öôÔ∏è app manifest ‚öôÔ∏è"
  notes="some useful notes ‚úèÔ∏è"
  code={require("!raw-loader!./examples/manifest.js")}
  lang="javascript"
  showNumbers={true}
  theme={nightOwl}
  dark={false}
  steps={[
    { lines: [27, 28, 29], notes: "Note for the first step ‚úèÔ∏è" },
    { range: [1, 2] },
    { tokens: { 1: [1, 2, 3] }, notes: "Note for the third step ‚úèÔ∏è" }
  ]}
/>

```notes
- Create speaker notes in fenced code blocks
```

---

## Meta data for non android browsers

IOS and Microsoft Edge and still need some metadata to make the app installable.
First, for iOS, it needs three `<meta>` tags.
They all start with apple-mobile-web-app and have a content property.


```notes
- Create speaker notes in fenced code blocks
```

---

### Capable

This meta tag tells iOS that this web app is installable.

---

### Status bar

Configure the status-bar-style, which it can be default, which is just the user's status bar.

IOS  - default, black, black-translucent

---

### Title

The appliction, most likely the same as the app manifest

---

### Homescreen icon

The icon that will be displayed in the iOS home screen. We will do this with a `<link>` tag.
In the rel property, the apple-touch-icon, and add the path to the smaller icon here.

we also have to add tags for edge...  The first one is TileImage. Again, we'll write here the path to the smaller icon.
The other property is TileColor, which is the tile color that Windows uses to place the tile icon in the home screen.
We'll just set it to black.

---

<CodeSurfer
  title="‚öôÔ∏è PWA meta data example ‚öôÔ∏è"
  notes="some useful notes ‚úèÔ∏è"
  code={require("!raw-loader!./examples/meta.html")}
  lang="html"
  showNumbers={true}
  theme={nightOwl}
  dark={false}
  steps={[
    { lines: [17], notes: "Note for the first step ‚úèÔ∏è" },
    { range: [1, 2] },
    { tokens: { 1: [1, 2, 3] }, notes: "Note for the third step ‚úèÔ∏è" }
  ]}
/>

```notes
- Create speaker notes in fenced code blocks
```

---

## Service workers

A service worker is a script that runs in the background without access to the UI, and a requisite for a Progressive Web App.
They can be used for caching requests and assets.

```notes
- Create speaker notes in fenced code blocks
```
export default Split

---

### More service workers

+ Service Workers are a virtual proxy between the browser and the network.
+ They run on a separate thread from the main JavaScript code of the page, and don't have any access to the DOM structure.
+ Non blocking API
+ You are able to give a Service Worker something to work on, and receive the result whenever it is ready using a Promise-based approach.

---

## Service workers life cycle üßü

<Appear>
  <p></p>
  <p>Parsed</p>
  <p>Installed</p>
  <p>Activating</p>
  <p>Activated</p>
  <p>Redundant</p>
</Appear>

```notes
- Create speaker notes in fenced code blocks
```

export default Split

---
parsed - When we first attempt to register a Service Worker, the user agent parses the script and obtains the entry point.
If parsing is successful (and some other requirements, e.g. HTTPS, are met),
we will have access to the Service Worker registration object.

installing - The first event a service worker gets is install. It's triggered as soon as the worker executes,
and it's only called once per service worker.

installed - Once the Service Worker script has been parsed,
the user agent attempts to install it and it moves to the installing state.

activating - The activating state will be triggered for a waiting Service Worker in one of the following scenarios -

    If there is no current active worker already
    If the self.skipWaiting() method is called in the Service Worker script
    If the user has navigated away from the page, thereby releasing the previous active worker
    If a specified period of time has passed, thereby releasing the previous active worker

Activated - If activation is successful, the Service Worker moves to the active state.
In this state, it is an active worker in full control of the document.

redundant - A Service Worker can become redundant for one of the following reasons -

    If the installing event failed
    If the activating event failed
    If a new Service Worker replaces it as the active service worker

---

## Service workers scope üéØ

  * The service worker will only catch requests from clients under the service worker's scope.
  * The max scope for a service worker is the location of the worker.
  * If your server worker is active on a client being served with the Service-Worker-Allowed header,
        you can specify a list of max scopes for that worker.
  * In Firefox, Service Worker APIs are hidden and cannot be used when the user is in private browsing mode.

```notes
- Create speaker notes in fenced code blocks
```

export default Split

---

## Network Strategy

With network strategies, you can tune which types of requests should
get the freshest content possible and which should try to get responses
from cache. That helps improve online performance by avoiding
unnecessary network round trips for static assets.

```notes
- Create speaker notes in fenced code blocks
```

export default Split

---

<Image src={require("!file-loader!./img/scope.png")} size="contain"/>


---

## Bonus ! ‚ú® hawt arrow functions ‚ú®

Not  all  browsers  support  arrow  functions ``` (() => {}) ``` but every
browser that supports Service Worker does, the same foes for CONST and LET, no babel required.

```notes
- Create speaker notes in fenced code blocks
```

---

## Check online status ‚õµÔ∏è

stuff about NavigatorOnline api

```notes
- Create speaker notes in fenced code blocks
```

---

## offline images ‚ùåüì∑

using svg for offline images

```notes
- Create speaker notes in fenced code blocks
```

---

## push notifications üêè

native application like push notifications

A notification is a message that pops up on the user's device. Notifications can be triggered locally by an open application,
or they can be "pushed" from the server to the user even when the app is not running.

https://developers.google.com/web/ilt/pwa/introduction-to-push-notifications


```notes
- Create speaker notes in fenced code blocks
```

---

<CodeSurfer
  code={`const code = {
  example: [
    'one',
    'two'
  ]
}`}
  lang="javascript"
  showNumbers={false}
  dark={false}
  steps={[
    { lines: [1], notes: "Note for the first step" },
    { range: [3, 4] },
    { tokens: { 3: [1, 2, 3] }, notes: "Note for the third step" }
  ]}
/>

## Split layout

```notes
- Create speaker notes in fenced code blocks
```

export default Split

---

## Performance üèÉüí®

https://hnpwa.com/


```notes
- Create speaker notes in fenced code blocks
```

export default Split

---

## Lighthouse audits üîÜ

Lighthouse is an open-source, automated tool for improving the quality of web pages.
You can run it against any web page, public or requiring authentication.
It has audits for performance, accessibility, progressive web apps, and more.

---

## here's a PWA I made earlier

<https://pwa-chat-2a5f9.firebaseapp.com>

```notes
- Create speaker notes in fenced code blocks
```

---

## Development Env.

Mobile testing
Ngrok is a service that relays your local environment on an external dns,
`npm install -g ngrok`
run
`ngrok http 8080` browse to the external URL. win.

---

### Test Production

service workers are a production feature so....

emulate an HTTP server `sudo npm install -g serve`

build project `npm run build`

serve production files `serve dist`

 more win.

---

### Intersction Observer api

An observer is an instance of Intersection Observer. You create the instance and use this instance to observe a DOM element.
You can observe when the element enters the viewport:

---

### UX Ehnancments.... that I didn't do

navigator offline API for disabling button state for form post

---

<Image src={require("!file-loader!./img/lighthouse.jpg")} size="contain"/>

---


<CodeSurfer
  title="Bonus! -  Lazy load routes üò¥"
  notes="some useful notes ‚úèÔ∏è"
  code={require("!raw-loader!./examples/import.js")}
  lang="javascript"
  showNumbers={true}
  theme={nightOwl}
  dark={false}
  steps={[
    { lines: [3], notes: "Note for the first step ‚úèÔ∏è" },
  ]}
/>

```notes
- Create speaker notes in fenced code blocks
```

---

## PWA busines case - stats and stuff üìà

---


<Image src={require("!file-loader!./img/business.gif")} size="contain"/>

```notes
- Create speaker notes in fenced code blocks
```

---

<Image src={require("!file-loader!./img/pwa-stats.png")} size="contain"/>

---

<Image src={require("!file-loader!./img/businesstime.gif")} size="contain"/>

---

## useful links

<https://caniuse.com/#feat=serviceworkers>

<https://developers.google.com/web/progressive-web-apps>

<https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API>

<https://serviceworke.rs/>

<https://egghead.io/courses/offline-first-progressive-web-apps-pwa-in-vue-js>

<https://www.smashingmagazine.com/2018/09/smashing-book-6-release>

```notes
- Create speaker notes in fenced code blocks
```

---

## ...more useful links

<https://developers.google.com/web/tools/lighthouse>

<https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API>

<https://www.pwastats.com>

<https://pwa.rocks>

<https://hnpwa.com>

```notes
- Create speaker notes in fenced code blocks
```

---

# slides built with mdx-deck ‚öõÔ∏è
# & codesurfer üèÑ
## hosted on netlify üëª

<https://github.com/jxnblk/mdx-deck>

<https://github.com/pomber/code-surfer>

<https://github.com/alanpcurrie/pwa-presentation>

<https://www.netlify.com>

```notes
- Create speaker notes in fenced code blocks
```

---

#  Thanks and questions üòò‚ùì

---